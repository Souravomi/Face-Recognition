{% extends 'User/Base_Guest.html' %}
{% load static %}

{% block content %}

<style>
    /* Style all input fields */
    input {
      width: 100%;
      padding: 12px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
      margin-top: 6px;
      margin-bottom: 16px;
    }
    
    /* Style the submit button */
    input[type=submit] {
      background-color: #4CAF50;
      color: white;
    }
    
    /* Style the container for inputs */
    .container {
      background-color: #f1f1f1;
      padding: 20px;
    }
    
    /* The message box is shown when the user clicks on the password field */
    #message {
      display:none;
      background: #f1f1f1;
      color: #000;
      position: relative;
      padding: 20px;
      margin-top: 10px;
    }
    
    #message p {
      padding: 10px 35px;
      font-size: 18px;
    }
    
    /* Add a green text color and a checkmark when the requirements are right */
    .valid {
      color: green;
    }
    
    .valid:before {
      position: relative;
      left: -35px;
      content: "?";
    }
    
    /* Add a red text color and an "x" when the requirements are wrong */
    .invalid {
      color: red;
    }
    
    .invalid:before {
      position: relative;
      left: -35px;
      content: "?";
    }
    </style>

    <div class="container">
        <br>
        <div class="row">

    <div class="col-md-4">
        <div class="card">

          <img class="card-img-top" src="{{ val.image.url }}" alt="Card image cap"  height="320"/>

           <ul class="list-group list-group-flush">
              <li class="list-group-item"><i class="fa fa-home"style="color:green"> </i><a href="{% url 'Home' %}" class="card-link">   Home</a></li>
              <li class="list-group-item"> <i class="fa fa-user" style="color:green"> </i><a href="{% url 'Profile' %}" class="card-link">    Profile Details</a></li>
              <li class="list-group-item"><i class="fa fa-edit" style="color:green"> </i><a href="{% url 'EditProfile' %}" class="card-link">   Edit Profile</a></li>
               <li class="list-group-item"><i class="fa fa-cog" style="color:green"> </i><a href="{% url 'Services' %}" class="card-link">   Serivice & Security</a></li>
               <li class="list-group-item"><i class="fa fa-sign-out"style="color:green"> </i><a href="{% url 'Logout' %}" class="card-link">   Logout</a></li>
           </ul>
           
        </div>
     </div>



<div class="col-md-4">
    <div class="card">
       <div class="card-body">
          <center><h3 class="card-title">CHANGE PROFILE</h3></center> 
          <hr>

          <form action="{% url 'Up_Pic' %}" enctype="multipart/form-data" method="POST">

            {% csrf_token %}

          <input type="file" name="file" id="file" class="form-control mr-sm-2" accept="image/*"  required onchange="return fileValidation()"><br>
          <button type="submit" class="btn btn-info btn-md form-control" >Update</button> <br>
            </form>

       </div>
    </div>

    <br>

    

 </div>


 
 <div class="col-md-4">

  {% if messages %}
       
  {% for message in messages %}
  
<script>
    alert("Your Existing Password Not Match")
</script>

  {% endfor %}

{% endif %}


  <form action="{% url 'Security' %}" method="POST" onsubmit="">
      {% csrf_token %}
    <div class="card">
       <div class="card-body">
      <center><h2 class="card-title">UPDATE PASSWORD</h2></center> 
           <hr>
           <input class="form-control mr-sm-2" name="old" id="old" type="password" placeholder="Current Password" required><br>
               
         <input class="form-control mr-sm-2"  id="psw" name="psw" type="password" placeholder="New Password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters" required>
           <br>
           <input class="form-control mr-sm-2" type="password" id="confirm" name="confirm" placeholder="Confirm Password" required>
           <br>
           <button type="submit" class="btn btn-success btn-md form-control" >Update</button>
           <br>
          
       </div>
    </div>

  </form>

       <!-- Message start --> 

       <br>
                 <div class="">
     <div id="message">
  <h6>Password must contain the following:</h6>
  <p id="letter" class="invalid">A <b>lowercase</b> letter</p>
  <p id="capital" class="invalid">A <b>capital (uppercase)</b> letter</p>
  <p id="number" class="invalid">A <b>number</b></p>
  <p id="length" class="invalid">Minimum <b>8 characters</b></p>
</div>
          </div>


       <!-- Message End --> 

       
    </div>
    <br>
    <br/>

</div>
</div>

<br>
<br>
  <!-- Message script --> 

 <script>
    var myInput = document.getElementById("psw");
    var letter = document.getElementById("letter");
    var capital = document.getElementById("capital");
    var number = document.getElementById("number");
    var length = document.getElementById("length");
    
    // When the user clicks on the password field, show the message box
    myInput.onfocus = function() {
      document.getElementById("message").style.display = "block";
    }
    
    // When the user clicks outside of the password field, hide the message box
    myInput.onblur = function() {
      document.getElementById("message").style.display = "none";
    }
    
    // When the user starts to type something inside the password field
    myInput.onkeyup = function() {
      // Validate lowercase letters
      var lowerCaseLetters = /[a-z]/g;
      if(myInput.value.match(lowerCaseLetters)) {  
        letter.classList.remove("invalid");
        letter.classList.add("valid");
      } else {
        letter.classList.remove("valid");
        letter.classList.add("invalid");
      }
      
      // Validate capital letters
      var upperCaseLetters = /[A-Z]/g;
      if(myInput.value.match(upperCaseLetters)) {  
        capital.classList.remove("invalid");
        capital.classList.add("valid");
      } else {
        capital.classList.remove("valid");
        capital.classList.add("invalid");
      }
    
      // Validate numbers
      var numbers = /[0-9]/g;
      if(myInput.value.match(numbers)) {  
        number.classList.remove("invalid");
        number.classList.add("valid");
      } else {
        number.classList.remove("valid");
        number.classList.add("invalid");
      }
      
      // Validate length
      if(myInput.value.length >= 8) {
        length.classList.remove("invalid");
        length.classList.add("valid");
      } else {
        length.classList.remove("valid");
        length.classList.add("invalid");
      }
    }


    // Validate Password and Confirm password
    var password = document.getElementById("psw")
    , confirm_password = document.getElementById("confirm");

      function validatePassword(){
     if(password.value != confirm_password.value) {
     confirm_password.setCustomValidity("Passwords Don't Match");
   } else {
     confirm_password.setCustomValidity('');
     }
    }

password.onchange = validatePassword;
confirm_password.onkeyup = validatePassword;


    </script>


    <script>
      function call() {
        alert("If you changed password ! Please Re-login")

      }

      
      function Mob() {
        alert("Mobile Updated Successfully")
      }
    </script>

     <!-- Message script --> 

       <script> 
        function fileValidation() { 
            var fileInput =  
                document.getElementById('file'); 
              
            var filePath = fileInput.value; 
          
            // Allowing file type 
            var allowedExtensions =  
                    /(\.jpg|\.jpeg|\.png|\.gif)$/i; 
              
            if (!allowedExtensions.exec(filePath)) { 
                alert('Invalid file type'); 
                fileInput.value = ''; 
                return false; 
            }  
            else  
            { 
              
                // Image preview 
                if (fileInput.files && fileInput.files[0]) { 
                    var reader = new FileReader(); 
                    reader.onload = function(e) { 
                        document.getElementById( 
                            'imagePreview').innerHTML =  
                            '<img src="' + e.target.result 
                            + '"/>'; 
                    }; 
                      
                    reader.readAsDataURL(fileInput.files[0]); 
                } 
            } 
        } 
    </script> 




{% endblock %}